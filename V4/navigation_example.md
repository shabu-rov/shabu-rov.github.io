# Примеры работы с навигацией робота
## Управление режимом движения робота:

У робота есть два режима работы передвижения: 

**Автоматический** - робот двигается автономно, в хаотичном режиме в случае отсутствия пакета навигации. В случае использования пакета навигации робот ездит по точкам с заданным маршрутом.

**Режим джойстика** - робот не двигается автономно. Управляется с помощью джойстика.

Посмотреть логи движения робота можно в папке `.promobot/log/latest.` Файл логов называется `movement.txt`. 

Удобно просматривать командой `tail -f movement.txt` (логи будут отображаться в реальном времени)

Данный топик позволяет управлять режимом движения: передача "0" актвирует режим джойстика, передача "1" активирует режим авто.

`rostopic pub /drive/mode std_msgs/UInt16 "data: 0" -1`

_Примечание: в логах movement появится запись: drive mode: 0._



`rostopic pub /drive/mode std_msgs/UInt16 "data: 1" -1`

_Примечание: в логах movement появится запись: drive mode: 1. Робот начнет езду при отсутствии взаимодействия и препятствий._



Данный топик переключает режимы с текущего на противоположный

`rostopic pub /drive/mode/switch std_msgs/Empty "{}" -1`

_Примечание: в логах movement появится запись: drive mode: 0, либо drive mode: 1, в зависимости в каком состоянии был робот._



## Отправка робота на зарядку:
Данный функционал доступен, если робот находится в режиме "**авто**".

Через данный топик можно отправить робота на зарядную станцию: передача true активирует алгоритм поиска зарядной станции, передача false его деактивирует.

`rostopic pub /drive/station std_msgs/Bool "data: false" -1`

_Примечание: в логах movement появится запись: received find station msg: 0_



`rostopic pub /drive/station std_msgs/Bool "data: true" -1`

_Примечание: в логах movement появится запись: received find station msg: 1_



## Отправка робота на точку:
Данный функционал доступен, если на роботе построена карта, добавлены и записаны точки в map.json. Также робот должен быть в режиме "авто".

При построении карты, обычно, точка с id = 0 является точкой зарядной станции. При отправки робота на точку с id = 0 не будет запускаться алгоритм поиска зарядки. Робот просто будет пытаться приехать на координаты точки с id = 0.

`rostopic pub /drive/point std_msgs/UInt16 "data: X" -1`

_Примечание: робот начнет движение на заданную точку, в логах movement появится запись: to_point_stright. start drive to point_